import{_ as f,h as c,g as m,s as w,a as b,b as p,c as y,r as i,d,e as B,f as L,o as x,i as k,j as s,k as j,w as E,F as I,l as C}from"./index-bfaceced.js";import{u as h}from"./create-61cfb7b7.js";import{s as g}from"./global-867567d1.js";import{i as r}from"./icons-8e0d5636.js";import{s as v}from"./settings-dade97d7.js";const T={setup(){document.getElementById("htmlTitle").innerText="GeoHunt - Create Lobby"},data(){return{wrongpassword_boolean:!1}},methods:{create_lobby(e,t){const a=c(m(),"createLobby"),o=c(m(),"updateLobbySettings");a({lobbyname:e,password:t}).then(n=>{console.log(n.data)}),o({lobbyname:e,password:t,setting:"hunter_selection",value:v.hunterSelection}).then(n=>{console.log(n.data)}),o({lobbyname:e,password:t,setting:"nameTags",value:v.nameTags})},login(){let e=document.getElementById("lobbyname"),t=document.getElementById("password"),a=document.getElementById("displayname");if(e.value==""||t.value==""||a.value==""){alert("Some fields are empty");return}const o=c(m(),"writeUserToRTDB");w(b()).then(()=>{console.log("Signed in succesfully"),document.getElementById("loginbutton").value=="join"&&p(y(i(d()),e.value+"/settings")).then(async n=>{t.value!=n.val().password?alert("Wrong Password"):o({displayname:a.value,lobbyname:e.value,icon:r[Object.keys(r)[Math.floor(Math.random()*Object.keys(r).length)]]}).then(l=>{console.log(l.data),h(b(),e.value),g(e.value),this.$router.push("/lobby")})}),document.getElementById("loginbutton").value=="create"&&(this.create_lobby(e.value,t.value),o({displayname:a.value,lobbyname:e.value,icon:r[Object.keys(r)[Math.floor(Math.random()*Object.keys(r).length)]]}).then(n=>{console.log(n.data),h(b(),e.value),g(e.value),this.$router.push("/lobby")}))})},passwordListener(){let e=document.getElementById("lobbyname").value,t=document.getElementById("loginbutton");p(y(i(d()),e)).then(a=>{a.exists()?p(y(i(d()),e+"/users")).then(async o=>{await!o.exists()?(B(i(d())),t.value="create"):t.value="join"}):t.value="create"})}}},S=s("head",null,[s("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"})],-1),F=s("div",{class:"header"},[s("h1",null,"Geo-Hunt;")],-1),M={id:"preLobbyDiv",class:"container"},N={class:"wrapper"},O=s("div",{class:"title"},[s("span",null,"Geo-Hunt Login")],-1),U={action:"#",autocomplete:"off"},q=C('<div class="row"><i class="fas fa-user"></i><input id="displayname" type="text" placeholder="Username" required></div><div class="row"><i class="fas fa-users"></i><input id="lobbyname" type="text" placeholder="Lobby Name" required></div>',2),D={class:"row"},G=s("i",{class:"fas fa-lock"},null,-1),H={class:"row-button"};function V(e,t,a,o,n,l){const _=L("center");return x(),k(I,null,[S,s("header",null,[j(_,null,{default:E(()=>[F]),_:1})]),s("div",M,[s("div",N,[O,s("form",U,[q,s("div",D,[G,s("input",{onFocus:t[0]||(t[0]=(...u)=>l.passwordListener&&l.passwordListener(...u)),id:"password",type:"text",placeholder:"Lobby Password",required:""},null,32)]),s("div",H,[s("input",{onClick:t[1]||(t[1]=(...u)=>l.login&&l.login(...u)),type:"button",id:"loginbutton",value:"Login"})])])])])],64)}const z=f(T,[["render",V],["__file","/home/dave/gvue/geohunt-vue/src/pages/Create.vue"]]);export{z as default};
