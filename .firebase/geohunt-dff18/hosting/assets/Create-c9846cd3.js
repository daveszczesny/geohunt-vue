import{_,h as b,g as y,s as f,a as u,b as p,c as m,r as i,d as c,e as w,f as B,o as I,i as L,j as t,k as x,w as E,F as k,l as C,p as F,m as S}from"./index-eb2dfc58.js";import{u as v}from"./create-8ff81cbc.js";import{s as g}from"./global-867567d1.js";const j={setup(){document.getElementById("htmlTitle").innerText="GeoHunt - Create Lobby"},data(){return{wrongpassword_boolean:!1}},methods:{create_lobby(e,a){b(y(),"createLobby")({lobbyname:e,password:a}).then(o=>{console.log(o.data)})},login(){let e=document.getElementById("lobbyname"),a=document.getElementById("password"),s=document.getElementById("displayname");if(e.value==""||a.value==""||s.value==""){document.getElementById("emptyFields").style="display:block;";return}const o=b(y(),"writeUserToRTDB");f(u()).then(()=>{console.log("Signed in succesfully"),document.getElementById("loginbutton").value=="join"&&p(m(i(c()),e.value+"/settings")).then(async d=>{a.value!=d.val().password?document.getElementById("wrongpassword").style="display: block":o({displayname:s.value,lobbyname:e.value,icon:"https://firebasestorage.googleapis.com/v0/b/geohunt-dff18.appspot.com/o/icons%2Fhunted1.png?alt=media&token=cc5a6ae7-3119-4f93-b6e8-c3ce689bff4f"}).then(n=>{console.log(n.data),v(u(),e.value),g(e.value),this.$router.push("/lobby")})}),document.getElementById("loginbutton").value=="create"&&(this.create_lobby(e.value,a.value),o({displayname:s.value,lobbyname:e.value,icon:"https://firebasestorage.googleapis.com/v0/b/geohunt-dff18.appspot.com/o/icons%2Fhunted1.png?alt=media&token=cc5a6ae7-3119-4f93-b6e8-c3ce689bff4f"}).then(d=>{console.log(d.data),v(u(),e.value),g(e.value),this.$router.push("/lobby")}))})},passwordListener(){let e=document.getElementById("lobbyname").value,a=document.getElementById("loginbutton");p(m(i(c()),e)).then(s=>{s.exists()?p(m(i(c()),e+"/users")).then(async o=>{await!o.exists()?(w(i(c())),a.value="create"):a.value="join"}):a.value="create"})}}},l=e=>(F("data-v-aada7010"),e=e(),S(),e),D=l(()=>t("head",null,[t("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"})],-1)),N=l(()=>t("div",{class:"header"},[t("h1",null,"Geo-Hunt;")],-1)),T={id:"preLobbyDiv",class:"container"},U={class:"wrapper"},q=l(()=>t("div",{class:"title"},[t("span",null,"Geo-Hunt Login")],-1)),G={action:"#",autocomplete:"off"},H=C('<div class="row" data-v-aada7010><i class="fas fa-user" data-v-aada7010></i><input id="displayname" type="text" placeholder="Username" required data-v-aada7010></div><div class="row" data-v-aada7010><i class="fas fa-users" data-v-aada7010></i><input id="lobbyname" type="text" placeholder="Lobby Name" required data-v-aada7010></div>',2),V={class:"row"},A=l(()=>t("i",{class:"fas fa-lock"},null,-1)),$={class:"row button"},P=l(()=>t("p",{style:{display:"none"},id:"wrongpassword"},"Wrong password",-1)),R=l(()=>t("p",{style:{display:"none"},id:"emptyFields"},"Some fields are empty",-1));function W(e,a,s,o,d,n){const h=B("center");return I(),L(k,null,[D,t("header",null,[x(h,null,{default:E(()=>[N]),_:1})]),t("div",T,[t("div",U,[q,t("form",G,[H,t("div",V,[A,t("input",{onFocus:a[0]||(a[0]=(...r)=>n.passwordListener&&n.passwordListener(...r)),id:"password",type:"text",placeholder:"Lobby Password",required:""},null,32)]),t("div",$,[t("input",{onClick:a[1]||(a[1]=(...r)=>n.login&&n.login(...r)),type:"button",id:"loginbutton",value:"Login"})]),P,R])])])],64)}const M=_(j,[["render",W],["__scopeId","data-v-aada7010"],["__file","/home/dave/Documents/geohunt-vue/geohunt-vue/src/pages/Create.vue"]]);export{M as default};
