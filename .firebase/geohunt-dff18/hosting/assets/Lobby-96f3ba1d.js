import{g as p}from"./global-867567d1.js";import{_,a as f,b as c,c as d,r as n,d as l,u,n as b,f as g,o as v,i as L,j as o,R as k,k as B,w,F as E,A as I,v as x,x as C}from"./index-bfaceced.js";import{i as G}from"./icons-8e0d5636.js";const R={data(){return{lobby_name:p(),lobbyID:null}},methods:{gamestart(){console.log("Hello?"),this.$router.push("/")},async copyLobbyURL(){const t=window.location.href.replace(/\/$/,"").replace(/\/lobby$/,"/sharelink/")+this.lobby_name;await navigator.clipboard.writeText(t),alert("Lobby URL copied to clipboard!")}},async mounted(){if(f().currentUser==null&&this.$router.push("/"),document.getElementById("htmlTitle").innerText="GeoHunt - "+this.lobby_name,c(d(n(l()),this.lobby_name+"/users")).then(e=>{Object.keys(e.val()).length==1&&(document.getElementById("startGameDiv").style="display: block",c(d(n(l()),this.lobby_name+"/users/")).then(t=>{const s=Math.floor(Math.random()*Object.keys(t.val()).length);u(n(l(),this.lobby_name+"/users/"+Object.keys(t.val())[s]),{team:"hunter",icon:G.hunter})}))}),document.getElementById("startGameBtn").addEventListener("click",()=>{u(n(l(),this.lobby_name+"/settings/"),{start:!0})}),this.$router.currentRoute._rawValue.fullPath=="/lobby")try{b(n(l(),this.lobby_name+"/users"),e=>{document.getElementById("myList").innerText=" ",e.forEach(t=>{const s=document.createElement("li"),r=document.createTextNode(t.val().display_name);if(document.getElementById("myList").appendChild(s),t.val().host){const a=document.createElement("i");a.classList.add("fas"),a.classList.add("fa-crown"),a.setAttribute("style","color:yellow;border:0;padding:0;position:relative;top:0.1%;left: 0%;"),s.appendChild(a)}s.appendChild(r)})})}catch{}b(n(l(),this.lobby_name+"/settings/start"),e=>{e.val()&&this.$router.push("/game")})}},m=e=>(x("data-v-96c8f923"),e=e(),C(),e),$={style:{display:"block"},id:"lobbyDiv",class:"gameContainer"},D={class:"wrapper"},S={class:"player-list"},U=m(()=>o("ul",{id:"myList"},null,-1)),N={id:"startGameDiv",style:{display:"none"}},T=m(()=>o("button",{id:"startGameBtn"},"Start",-1));function V(e,t,s,r,a,i){const y=g("center");return v(),L(E,null,[o("h1",null,"Lobby "+k(a.lobby_name),1),o("div",$,[o("div",D,[o("div",S,[B(y,null,{default:w(()=>[U,o("div",N,[T,o("button",{onClick:t[0]||(t[0]=(...h)=>i.copyLobbyURL&&i.copyLobbyURL(...h))},"Get Lobby URL"),I(' <router-link to="/game" id="startGameBtn">Start</router-link> ')])]),_:1})])])])],64)}const F=_(R,[["render",V],["__scopeId","data-v-96c8f923"],["__file","/home/dave/gvue/geohunt-vue/src/pages/Lobby.vue"]]);export{F as default};
