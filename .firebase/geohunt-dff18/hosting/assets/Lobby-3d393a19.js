import{g as _}from"./global-867567d1.js";import{_ as g,a as d,b as u,c as b,r as s,d as a,u as r,n as m,f as v,o as f,i as L,j as o,R as k,k as B,w,F as E,v as I,x}from"./index-698433d6.js";import{i as C}from"./icons-8e0d5636.js";const D={data(){return{lobby_name:_(),lobbyID:null}},methods:{gamestart(){console.log("Hello?"),this.$router.push("/")},async copyLobbyURL(){const e=window.location.href.replace(/\/$/,"").replace(/\/lobby$/,"/sharelink/")+this.lobby_name;await navigator.clipboard.writeText(e),alert("Lobby URL copied to clipboard!")}},async mounted(){d().currentUser==null&&this.$router.push("/"),document.getElementById("htmlTitle").innerText="GeoHunt - "+this.lobby_name,u(b(s(a()),this.lobby_name+"/users")).then(t=>{Object.keys(t.val()).length==1&&(document.getElementById("startGameDiv").style="display: block",u(b(s(a()),this.lobby_name+"/users/")).then(e=>{const n=Math.floor(Math.random()*Object.keys(e.val()).length);r(s(a(),this.lobby_name+"/users/"+Object.keys(e.val())[n]),{team:"hunter",icon:C.hunter})}))}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{const e={lat:t.coords.latitude,lng:t.coords.longitude};r(s(a(),this.lobby_name+"/users/"+d().currentUser),{location:e})}),document.getElementById("startGameBtn").addEventListener("click",()=>{r(s(a(),this.lobby_name+"/settings/"),{start:!0})}),m(s(a(),this.lobby_name+"/users"),t=>{try{document.getElementById("myList").innerText=" ",t.forEach(e=>{const n=document.createElement("li"),i=document.createTextNode(e.val().display_name);if(document.getElementById("myList").appendChild(n),e.val().host){const l=document.createElement("i");l.classList.add("fas"),l.classList.add("fa-crown"),l.setAttribute("style","color:yellow;border:0;padding:0;position:relative;top:0.1%;left: 0%;"),n.appendChild(l)}n.appendChild(i)})}catch{}}),m(s(a(),this.lobby_name+"/settings/start"),t=>{t.val()&&this.$router.push("/game")})}},y=t=>(I("data-v-96c8f923"),t=t(),x(),t),U={style:{display:"block"},id:"lobbyDiv",class:"gameContainer"},R={class:"wrapper"},S={class:"player-list"},$=y(()=>o("ul",{id:"myList"},null,-1)),G=y(()=>o("div",{id:"startGameDiv",style:{display:"none"}},[o("div",{class:"start-button"},[o("button",{id:"startGameBtn",class:"button"},"Start")])],-1)),T={class:"getURLdiv"};function j(t,e,n,i,l,c){const h=v("center");return f(),L(E,null,[o("h1",null,"Lobby "+k(l.lobby_name),1),o("div",U,[o("div",R,[o("div",S,[B(h,null,{default:w(()=>[$,G]),_:1})])])]),o("div",T,[o("button",{onClick:e[0]||(e[0]=(...p)=>c.copyLobbyURL&&c.copyLobbyURL(...p)),class:"button"},"Share")])],64)}const A=g(D,[["render",j],["__scopeId","data-v-96c8f923"],["__file","/home/dave/Documents/geohunt-vue/src/pages/Lobby.vue"]]);export{A as default};
